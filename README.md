# Задание по курсу по курсу "Тестирование"

## 1

О том, как запускать тесты было рассказано в самом задании.

## 2

### Исправления и общие комментарии по коду

1. Пришлось удалить все упоминание о форме редактирования пользователя, потому что она не реализована.
2. Не тестировался run_game, потому что я так и не понял, как он работает и что он должен делать. При отрисовке шаблона от требует game_id, но его не предоставляет.
3. Была проблема с логином. Если view требует логина, то по-дефолту происходит редирект на `accounts/login`. Но нам хочется явно в `/login`. Пришлось изменить настройки в settings.py.
4. Очень странно, что view: `give_up`, `view_profile`, `cancel_game_request`, `play_with_bot` не требуют быть залогинненым. Для `play_with_bot` поставил декоратор для логина.
5. Странно, что нельзя сделать `give_up` при игре против бота. Дело в том, что при завершении игры он попытается удалить то, что не создавалось при игре против бота.

### Как проверялось

1. Проверка виртуального окружения/миграций/старта находится в balda/tests.
2. Проверка регистрации состоит из проферки форм в `balda_game/tests/test_forms.py` и проверки view в `balda_game/tests/test_views.py`.
3. Проверка логина состоит из проферки из проверки view в `balda_game/tests/test_views.py`.
4. Проверка изменения статуса пользователя:
   * Проверка модели `UserPlayer` в `balda_game/tests/test_modelspy`;
   * Проверка изменения `online` в `test_views.TestGameWait`;
   * Проверка изменения `last_waited` в `test_views.TestGameWait`;
   * Проверка изменения `last_seen_in_game` в `test_views.TestWaitQuery`.
5. Проверка того, что пользователь стартует игру с игроком/ботом состоит из тестирования: 
   * `test_views.TestGameWait`;
   * `test_views.TestWaitQuery`; 
   * `test_views.TestPlayWithBot`; 
   * `test_views.TestStartGame`.

### Как протестировать

1. Создать виртуальное окружение
2. Поставить туда зависимости из requirements.txt
3. Настроить БД, причем так, чтобы django мог создать свою тестовую БД.
4. Прогнать тесты
   * `python manage.py test balda/tests`
   * `python manage.py test balda_game/tests`
